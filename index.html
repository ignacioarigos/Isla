<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Calendario Interactivo</title>
  <style>
    body {
      font-family: Segoe UI, Roboto, sans-serif;
      background-color: #f5f7fa;
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    h1 {
      font-weight: 600;
      margin-bottom: 20px;
    }
    #mes-actual {
      font-size: 18px;
      font-weight: 500;
      margin-bottom: 12px;
      background: #fff3cd;
      padding: 6px 12px;
      border-radius: 6px;
    }
    table {
      border-collapse: collapse;
      background-color: #fff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    th, td {
      width: 40px;
      height: 40px;
      text-align: center;
      border: 1px solid #ccc;
    }
    td {
      cursor: pointer;
    }
    td:hover {
      background-color: #eee;
    }
    .highlight {
      font-weight: bold;
      color: white;
    }
    .eugenia  { background: linear-gradient(135deg, #bb86fc, #9e71e9); }
    .malvina  { background: linear-gradient(135deg, #2ecc71, #27ae60); }
    .ramon    { background: linear-gradient(135deg, #f7901e, #e85c00); }
    .enrique  { background: linear-gradient(135deg, #ff7f7f, #ff4f4f); }
    #asignado {
      margin-top: 16px;
      font-weight: 500;
      background-color: #fff8e1;
      padding: 8px 16px;
      border-radius: 8px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <h1>Calendario de Asignaciones</h1>
  <div id="mes-actual">Agosto 2025</div>
  <table id="calendario">
    <thead>
      <tr>
        <th>Do</th><th>Lu</th><th>Ma</th><th>Mi</th><th>Ju</th><th>Vi</th><th>Sa</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <div id="asignado">Seleccioná una fecha para ver el bloque asignado</div>
  <script>
      // Bloque 2 — Rango extendido (jueves a miércoles) por asignación
  const bloque2Rangos = [
    { inicio: "2025-03-08", fin: "2025-03-09", nombre: "enrique" },
    { inicio: "2025-03-15", fin: "2025-03-16", nombre: "ramon" },
    { inicio: "2025-03-22", fin: "2025-03-24", nombre: "eugenia" },
    { inicio: "2025-03-29", fin: "2025-03-30", nombre: "eugenia" },
    { inicio: "2025-04-05", fin: "2025-04-06", nombre: "malvina" },
    { inicio: "2025-04-12", fin: "2025-04-13", nombre: "enrique" },
    { inicio: "2025-04-19", fin: "2025-04-20", nombre: "ramon" },
    { inicio: "2025-04-26", fin: "2025-04-27", nombre: "eugenia" },
    { inicio: "2025-05-01", fin: "2025-05-04", nombre: "enrique" },
    { inicio: "2025-05-10", fin: "2025-05-11", nombre: "malvina" },
    { inicio: "2025-05-17", fin: "2025-05-18", nombre: "enrique" },
    { inicio: "2025-05-24", fin: "2025-05-25", nombre: "ramon" },
    { inicio: "2025-05-31", fin: "2025-06-01", nombre: "eugenia" },
    { inicio: "2025-06-07", fin: "2025-06-08", nombre: "malvina" },
    { inicio: "2025-06-14", fin: "2025-06-16", nombre: "ramon" },
    { inicio: "2025-06-20", fin: "2025-06-22", nombre: "malvina" },
    { inicio: "2025-06-28", fin: "2025-06-29", nombre: "enrique" },
    { inicio: "2025-07-05", fin: "2025-07-06", nombre: "ramon" },
    { inicio: "2025-07-12", fin: "2025-07-13", nombre: "eugenia" },
    { inicio: "2025-08-09", fin: "2025-08-10", nombre: "malvina" },
    { inicio: "2025-08-15", fin: "2025-08-14", nombre: "eugenia" }, // fecha invertida, se corregirá en lógica
    { inicio: "2025-08-23", fin: "2025-08-24", nombre: "enrique" },
    { inicio: "2025-08-30", fin: "2025-08-31", nombre: "ramon" },
    { inicio: "2025-09-06", fin: "2025-09-07", nombre: "eugenia" },
    { inicio: "2025-09-13", fin: "2025-09-14", nombre: "malvina" },
    { inicio: "2025-09-20", fin: "2025-09-21", nombre: "enrique" },
    { inicio: "2025-09-27", fin: "2025-09-28", nombre: "ramon" },
    { inicio: "2025-10-04", fin: "2025-10-05", nombre: "eugenia" },
    { inicio: "2025-10-11", fin: "2025-10-12", nombre: "malvina" },
    { inicio: "2025-10-18", fin: "2025-10-19", nombre: "enrique" },
    { inicio: "2025-10-25", fin: "2025-10-26", nombre: "ramon" },
    { inicio: "2025-11-01", fin: "2025-11-02", nombre: "eugenia" },
    { inicio: "2025-11-08", fin: "2025-11-09", nombre: "malvina" },
    { inicio: "2025-11-15", fin: "2025-11-16", nombre: "enrique" },
    { inicio: "2025-11-21", fin: "2025-11-24", nombre: "enrique" },
    { inicio: "2025-11-29", fin: "2025-11-30", nombre: "ramon" },
    { inicio: "2025-12-06", fin: "2025-12-08", nombre: "ramon" },
    { inicio: "2025-12-13", fin: "2025-12-14", nombre: "eugenia" },
    { inicio: "2025-12-20", fin: "2025-12-21", nombre: "malvina" },
    { inicio: "2025-12-27", fin: "2025-12-28", nombre: "enrique" }
  ];
      const tbody = document.querySelector("tbody");
  const mesActualElem = document.getElementById("mes-actual");

  // Construir mes actual
  const fechaBase = new Date(2025, 7); // Agosto 2025
  dibujarMes(fechaBase);

  function dibujarMes(fecha) {
    tbody.innerHTML = "";
    const año = fecha.getFullYear();
    const mes = fecha.getMonth();
    const primerDia = new Date(año, mes, 1);
    const ultimoDia = new Date(año, mes + 1, 0);
    const diaInicio = primerDia.getDay();
    const diasEnMes = ultimoDia.getDate();

    let fila = document.createElement("tr");
    for (let i = 0; i < diaInicio; i++) {
      fila.appendChild(document.createElement("td"));
    }

    for (let dia = 1; dia <= diasEnMes; dia++) {
      const celda = document.createElement("td");
      celda.textContent = dia;
      const fechaStr = `${año}-${(mes + 1).toString().padStart(2, '0')}-${dia.toString().padStart(2, '0')}`;
      celda.dataset.fecha = fechaStr;

      celda.onclick = () => seleccionarFecha(fechaStr);
      fila.appendChild(celda);

      if ((dia + diaInicio) % 7 === 0) {
        tbody.appendChild(fila);
        fila = document.createElement("tr");
      }
    }

    if (fila.hasChildNodes()) {
      tbody.appendChild(fila);
    }

    const nombreMes = fecha.toLocaleString("es-ES", { month: "long" });
    mesActualElem.textContent = `${nombreMes.charAt(0).toUpperCase() + nombreMes.slice(1)} ${año}`;
  }

  function seleccionarFecha(fechaStr) {
    const fechaSeleccionada = new Date(fechaStr);
    let rangoEncontrado = null;

    for (const r of bloque2Rangos) {
      let inicio = new Date(r.inicio);
      let fin = new Date(r.fin);
      if (inicio > fin) [inicio, fin] = [fin, inicio]; // corregir fechas invertidas

      if (fechaSeleccionada >= inicio && fechaSeleccionada <= fin) {
        rangoEncontrado = { inicio: inicio, fin: fin, nombre: r.nombre };
        break;
      }
    }

    limpiarColores();

    if (rangoEncontrado) {
      const jueves = obtenerJuevesAnterior(rangoEncontrado.inicio);
      const miercoles = obtenerMiercolesSiguiente(rangoEncontrado.fin);

      pintarRango(jueves, miercoles, rangoEncontrado.nombre);
      document.getElementById("asignado").textContent = `Bloque 2: ${capitalizar(rangoEncontrado.nombre)} asignado del ${formatear(jueves)} al ${formatear(miercoles)}`;
    } else {
      document.getElementById("asignado").textContent = `No hay asignación para la fecha seleccionada`;
    }
  }

  function pintarRango(inicio, fin, nombre) {
    const celdas = document.querySelectorAll("td");
    for (const celda of celdas) {
      const fechaCelda = new Date(celda.dataset.fecha);
      if (fechaCelda >= inicio && fechaCelda <= fin) {
        celda.classList.add("highlight", nombre);
      }
    }
  }

  function limpiarColores() {
    const celdas = document.querySelectorAll("td");
    for (const celda of celdas) {
      celda.classList.remove("highlight", "eugenia", "malvina", "ramon", "enrique");
    }
  }

  function obtenerJuevesAnterior(fecha) {
    const copia = new Date(fecha);
    while (copia.getDay() !== 4) copia.setDate(copia.getDate() - 1);
    return copia;
  }

  function obtenerMiercolesSiguiente(fecha) {
    const copia = new Date(fecha);
    while (copia.getDay() !== 3) copia.setDate(copia.getDate() + 1);
    return copia;
  }

  function formatear(fecha) {
    const d = fecha.getDate().toString().padStart(2, "0");
    const m = (fecha.getMonth() + 1).toString().padStart(2, "0");
    const y = fecha.getFullYear();
    return `${d}/${m}/${y}`;
  }

  function capitalizar(txt) {
    return txt.charAt(0).toUpperCase() + txt.slice(1);
  }
  </script>
</body>
</html>
