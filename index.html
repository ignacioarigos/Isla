<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Asignación de Bloques</title>
    <style>
        body {
            background: linear-gradient(135deg, #1f1f1f, #ff6600);
            color: #fff;
            font-family: sans-serif;
            padding: 20px;
        }
        select, button {
            padding: 8px;
            margin: 10px 0;
            border-radius: 6px;
            border: none;
        }
        #resultado {
            margin-top: 20px;
            background-color: #2b2b2b;
            padding: 15px;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>Asignación por Fecha</h1>
    <label for="fecha">Selecciona una fecha:</label>
    <input type="date" id="fecha" />
    <button onclick="seleccionarFecha()">Consultar</button>
    <div id="resultado"></div>
    <script>
const bloques = [
  {
    nombre: "Bloque 1",
    prioridad: 1,
    asignaciones: [
      { inicio: "2025-01-02", fin: "2025-01-16", nombre: "Eugenia" },
      { inicio: "2025-01-17", fin: "2025-01-31", nombre: "Malvina" },
      { inicio: "2025-02-01", fin: "2025-02-15", nombre: "Enrique" },
      { inicio: "2025-02-16", fin: "2025-03-02", nombre: "Ramón" }
    ]
  },
  {
    nombre: "Bloque 2",
    prioridad: 4,
    asignaciones: [
      { inicio: "2025-08-07", fin: "2025-08-13", nombre: "Eugenia" },
      { inicio: "2025-08-14", fin: "2025-08-20", nombre: "Malvina" }
    ]
  },
  {
    nombre: "Bloque 3",
    prioridad: 2,
    asignaciones: [
      { inicio: "2025-07-01", fin: "2025-07-15", nombre: "Enrique" },
      { inicio: "2025-07-16", fin: "2025-07-31", nombre: "Ramón" }
    ]
  },
  {
    nombre: "Bloque 4",
    prioridad: 3,
    asignaciones: [
      { inicio: "2025-12-20", fin: "2025-12-31", nombre: "Malvina" },
      { inicio: "2026-01-01", fin: "2026-01-10", nombre: "Eugenia" }
    ]
  }
];
      <script>
function seleccionarFecha() {
    const fechaInput = document.getElementById("fecha").value;
    if (!fechaInput) return;

    const fechaSeleccionada = new Date(fechaInput);
    const resultadoDiv = document.getElementById("resultado");
    let asignacionFinal = null;
    let prioridadMasAlta = Infinity;

    bloques.forEach(bloque => {
        bloque.asignaciones.forEach(asignacion => {
            const inicio = new Date(asignacion.inicio);
            const fin = new Date(asignacion.fin);

            // Para Bloque 2, extender jueves a miércoles si corresponde
            if (bloque.nombre === "Bloque 2" && fechaSeleccionada >= inicio && fechaSeleccionada <= fin) {
                const rango = extenderBloque2(fechaSeleccionada);
                inicio.setTime(rango[0].getTime());
                fin.setTime(rango[1].getTime());
            }

            if (fechaSeleccionada >= inicio && fechaSeleccionada <= fin && bloque.prioridad < prioridadMasAlta) {
                asignacionFinal = {
                    nombre: asignacion.nombre,
                    bloque: bloque.nombre,
                    desde: asignacion.inicio,
                    hasta: asignacion.fin
                };
                prioridadMasAlta = bloque.prioridad;
            }
        });
    });

    resultadoDiv.innerHTML = asignacionFinal
        ? `<strong>${asignacionFinal.nombre}</strong> tiene asignación en <strong>${asignacionFinal.bloque}</strong> del <strong>${asignacionFinal.desde}</strong> al <strong>${asignacionFinal.hasta}</strong>.`
        : `No hay asignación para esa fecha.`;
}

// 📅 Extiende de jueves a miércoles para Bloque 2
function extenderBloque2(fecha) {
    const diaSemana = fecha.getDay(); // domingo = 0, lunes = 1, ..., sábado = 6
    const diferenciaAtras = (diaSemana >= 4) ? diaSemana - 4 : 7 - (4 - diaSemana);
    const inicio = new Date(fecha);
    inicio.setDate(fecha.getDate() - diferenciaAtras);
    const fin = new Date(inicio);
    fin.setDate(inicio.getDate() + 6);
    return [inicio, fin];
}
</script>
</body>
</html>
